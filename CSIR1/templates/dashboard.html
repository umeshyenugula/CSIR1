<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sequence Event Round 1 - Dashboard</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Ubuntu+Mono&display=swap');

    body {
      margin: 0;
      padding: 0;
      font-family: 'Orbitron', sans-serif;
      background: radial-gradient(circle at center, #0f0f1b 0%, #0c0c16 100%);
      color: #f0f0f0;
      text-align: center;
      user-select: none;
      overflow-x: hidden;
    }

    header {
      background: #1e1e2f;
      padding: 30px 10px;
      box-shadow: 0 0 20px #00ffee55;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 30px;
      flex-wrap: wrap;
    }

    .header-logo {
      height: 90px;
      width: auto;
      filter: drop-shadow(0 0 6px #6fffe9);
    }

    header h1 {
      font-weight: 700;
      font-size: 2.8rem;
      color: #6fffe9;
      text-shadow: 1px 1px 3px #00ffeeb0;
      margin: 0;
    }

    main {
      margin: 40px auto;
      max-width: 900px;
      padding: 0 20px;
    }

    h2 {
      font-size: 2rem;
      color: #ffdb70;
      margin-bottom: 10px;
      text-shadow: 1px 1px 2px #000;
      font-weight: 700;
    }

    .team-name {
      font-size: 1.4rem;
      font-weight: 600;
      color: #6fffe9;
      margin-bottom: 40px;
      text-shadow: 1px 1px 1px #000000aa;
    }

    .image-container {
      display: flex;
      justify-content: center;
      gap: 25px;
      flex-wrap: wrap;
    }

    .image-option {
      width: 210px;
      height: 210px;
      border-radius: 30px;
      overflow: hidden;
      cursor: pointer;
      box-shadow: 0 0 20px #6fffe9aa;
      background: #1e1e2f;
      border: 2px solid #6fffe9cc;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      filter: drop-shadow(0 0 6px #00ffee);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .image-option:hover {
      transform: scale(1.08);
      box-shadow: 0 0 35px #00ffee;
    }

    .image-option img {
      width: 90%;
      height: 90%;
      object-fit: contain;
      border-radius: 25px;
      filter: drop-shadow(0 0 8px #00ffee99);
      transition: transform 0.3s ease;
    }

    .image-option:hover img {
      transform: scale(1.1);
    }

    .stats-container {
      margin-top: 50px;
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
    }

    .stat-box {
      background: rgba(32, 32, 44, 0.95);
      border: 2px solid #6fffe9cc;
      box-shadow: 0 0 20px #6fffe9bb;
      border-radius: 25px;
      padding: 25px 45px;
      color: #6fffe9;
      font-size: 1.3rem;
      font-weight: 700;
      cursor: default;
      user-select: none;
      min-width: 240px;
      text-align: center;
      transition: box-shadow 0.3s ease;
    }

    .stat-box:hover {
      box-shadow: 0 0 40px #00ffee;
    }

    a {
      text-decoration: none;
      color: inherit;
      display: inline-block;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .image-option {
        width: 160px;
        height: 160px;
      }
      .stat-box {
        min-width: 160px;
        font-size: 1.1rem;
        padding: 18px 30px;
      }
    }

    @media (max-width: 480px) {
      .image-option {
        width: 130px;
        height: 130px;
      }
      .stat-box {
        font-size: 1rem;
        padding: 15px 25px;
        min-width: 130px;
      }
      header h1 {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>

<header>
  <img src="static/images/csi_logo.png" alt="CSI Logo" class="header-logo" />
  <h1>Computer Society of India - GRIET</h1>
  <img src="static/images/griet_logo.png" alt="GRIET Logo" class="header-logo" />
</header>

<main>
  <a href="/returntomain" class="stat-box" style="cursor:pointer; margin-bottom: 40px; display: inline-block; width: auto;">
    Return to Main
  </a>

  <h2>Sequence Event Round 1</h2>
  <div class="team-name">Round Name: {{ team_name }}</div>

  <div class="image-container">
    <a href="/tech" class="image-option" style="animation-delay: 0.1s;">
      <img src="{{ url_for('static', filename='images/img1.png') }}" alt="Tech Quiz" />
    </a>
    <a href="/imagequiz" class="image-option" style="animation-delay: 0.2s;">
      <img src="{{ url_for('static', filename='images/img2.png') }}" alt="Image Quiz" />
    </a>
    <a href="/reverse" class="image-option" style="animation-delay: 0.3s;">
      <img src="{{ url_for('static', filename='images/img3.png') }}" alt="Reverse Let" />
    </a>
    <a href="/riddles" class="image-option" style="animation-delay: 0.4s;">
      <img src="{{ url_for('static', filename='images/img4.png') }}" alt="Riddles" />
    </a>
    <a href="/truthquiz" class="image-option" style="animation-delay: 0.5s;">
      <img src="{{ url_for('static', filename='images/img5.png') }}" alt="Truth or Lie" />
    </a>
  </div>

  <div class="stats-container" style="margin-top: 60px;">
    <div class="stat-box">Questions Attempted: {{ questions_taken }}</div>
    <div class="stat-box">Correct Answers: {{ questions_correct }}</div>
  </div>
</main>

  <div id="exitModal" style="display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); align-items: center; justify-content: center; z-index: 9999; color:white; font-family: 'Segoe UI', sans-serif;">
    <div style="text-align: center;">
      <h2>Enter Exit Code</h2>
      <input id="exitCodeInput" type="password" style="padding: 10px; font-size: 1.2em;" />
      <br /><br />
      <button id="exitCodeSubmit" style="padding: 10px 20px; font-size: 1em;">Submit</button>
      <div id="exitCodeError" style="color: red; margin-top: 10px; display: none;">Incorrect code!</div>
    </div>
  </div>

  <script>
    const exitModal = document.getElementById('exitModal');
    const exitCodeInput = document.getElementById('exitCodeInput');
    const exitCodeSubmit = document.getElementById('exitCodeSubmit');
    const exitCodeError = document.getElementById('exitCodeError');
    const secretExitCode = 'umesh';
    let allowExit = false;

    function onFullscreenChange() {
      const fullscreenElement = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;
      if (!fullscreenElement && !allowExit) {
        requestFullscreen();
        showExitModal();
      }
    }

    function requestFullscreen() {
      const elem = document.documentElement;
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) {
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) {
        elem.msRequestFullscreen();
      }
    }

    function exitFullscreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      }
    }

    function showExitModal() {
      exitModal.style.display = 'flex';
      exitCodeInput.value = '';
      exitCodeError.style.display = 'none';
      exitCodeInput.focus();
    }

    function hideExitModal() {
      exitModal.style.display = 'none';
    }

    exitCodeSubmit.addEventListener('click', () => {
      const code = exitCodeInput.value.trim();
      if (code.toLowerCase() === secretExitCode.toLowerCase()) {
        allowExit = true;
        hideExitModal();
        exitFullscreen();
      } else {
        exitCodeError.style.display = 'block';
      }
    });

    exitCodeInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        exitCodeSubmit.click();
      }
    });

    document.addEventListener('keydown', function (e) {
      if (
        e.key === 'Escape' ||
        e.key === 'F11' ||
        (e.ctrlKey && e.key.toLowerCase() === 'w') ||
        (e.altKey && e.key.toLowerCase() === 'f4')
      ) {
        e.preventDefault();
      }
    });

    document.addEventListener('contextmenu', e => e.preventDefault());

    document.addEventListener('fullscreenchange', onFullscreenChange);
    document.addEventListener('webkitfullscreenchange', onFullscreenChange);
    document.addEventListener('mozfullscreenchange', onFullscreenChange);
    document.addEventListener('MSFullscreenChange', onFullscreenChange);

   window.onload = () => {
      if (!document.fullscreenElement) {
        requestFullscreen();
      }
    };
  </script>
</body>
</html>
